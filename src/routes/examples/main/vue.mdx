# Vue

Setting up Mirage with a Vue app is easy, whether you're using Vue CLI or some other environment. You only need a single file.

Make sure you have Mirage installed in your project:

```bash
# Using npm
npm install --save-dev miragejs

# Using Yarn
yarn add --dev miragejs
```

## Defining the server

Create a new file, `src/server.js`, that will hold the code for our mock server. To get started quickly, let's use the following server definition. Paste this code into the new `server.js` file.

```js
// src/server.js

import { Server } from "miragejs"

export function makeServer({ environment = "development" } = {}) {
  let server = new Server({
    environment,

    routes() {
      this.namespace = "api"

      this.get("/users", () => {
        return {
          users: [
            {
              id: 1,
              name: "Bob",
            },
            {
              id: 2,
              name: "Alice",
            },
          ],
        }
      })
    },
  })

  return server
}
```

This server defines a single endpoint, `/api/users`, that responds with a JSON payload containing two users, Bob and Alice. That's it!

Here, we're exporting a `makeServer` function that will let us customize our Mirage server in the development and testing environments. This is one good approach, but feel free to customize this file however you like. The only thing that's Mirage-specific is the call to `new Server()`.

## Using our server in Development

Now that we have our server defined, let's get it running in development.

We'll open our Vue app's `src/main.js` file, import the `makeServer` function, and invoke it in development.

```diff
// src/main.js

import Vue from 'vue'
import App from './App.vue'
+ import { makeServer } from "./server";

Vue.config.productionTip = false

+ if (process.env.NODE_ENV === 'development') {
+   makeServer();
+ }

new Vue({
  render: h => h(App),
}).$mount('#app')
```

Mirage is now running when our app boots up in development! As the application attempts to fetch data from the network, Mirage will step in to handle the request. The following App component fetches the two users that were defined in our `routes()` config:

```html
// src/App.vue

<template>
  <ul id="users">
    <li v-for="user in users" v-bind:key="user.id">{{ user.name }}</li>
  </ul>
</template>

<script>
  export default {
    name: "app",

    data() {
      return {
        users: [],
      }
    },

    created: async function() {
      let response = await fetch("/api/users")
      let json = await response.json()
      this.users = json.users
    },
  }
</script>
```

That's it! Our component will now render a list with both of our users, Bob and Alice.
